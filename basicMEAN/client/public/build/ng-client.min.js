angular.module("basicMEAN",["ngRoute"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/view1/view1",controller:"View1Ctrl as $ctrl"}).when("/view1",{templateUrl:"partials/view1/view1",controller:"View1Ctrl as $ctrl"}).when("/view2",{templateUrl:"partials/view2/view2",controller:"View2Ctrl as $ctrl"}).when("/search",{templateUrl:"partials/view-search/view-search",controller:"ViewSearchCtrl as $ctrl"}).when("/view-protected",{templateUrl:"partials/secure/view-protected/view-protected",controller:"ViewProtectedCtrl as $ctrl"})}]),angular.module("basicMEAN").controller("NavbarCtrl",["$scope","$http","$location","$window","$timeout",function(e,t,r,a,i){function n(){if(!s(h.signupEmail))return l("You must enter a valid email address."),!1;var e=h.signupPass!=h.signupPassConfirm,t=!e&&o(h.signupPass);return e?(c("Your passwords must match."),!1):!!t||(c("Your password must be at least 8 characters long."),!1)}function s(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function o(e){return!(e.length<8)}function l(e){h.emailError=!0,u(e,!0),i(function(){h.emailError=!1},4e3)}function c(e){h.passwordError=!0,u(e,!0),i(function(){h.passwordError=!1},4e3)}function u(e,t){h.signupErrorMsg=e,h.showSignupErrorMsg=!0,t&&i(function(){h.showSignupErrorMsg=!1},4e3)}var h=this;h.$location=r,e.$on("$locationChangeStart",function(e){h.loading=!0}),e.$on("$locationChangeSuccess",function(e){h.loading=!1});h.login=function(){var e={email:h.loginEmail,password:h.loginPass};t.post("/authenticate/login",e).then(function(){a.location.href="/profile"},function(){h.showLoginErrorMsg=!0,h.loginErrorMsg="Login failed",i(function(){h.showLoginErrorMsg=!1},4e3)})};h.signup=function(){if(0!=n()){var e={email:h.signupEmail,password:h.signupPass};t.post("/authenticate/signup",e).then(function(){a.location.href="/profile"},function(){u("Signup failed. Try again later.",!0)})}else console.log("there were errors in the signup params!")},h.clicked=function(){console.log("test click!")}}]),angular.module("basicMEAN").service("Search",["$location","$http","$q",function(e,t,r){let a=this;a.SEARCH_VIEW_ROUTE="/search",a.searchData={latestSearchTerm:null},a.viewSearchResults=function(t){t?(a.searchData.latestSearchTerm=t,e.path(a.SEARCH_VIEW_ROUTE).search({searchTerm:t})):console.error("A search term must be provided!")},a.getSearchResults=function(e){return r(function(e,t){e(["Sample result 1","Sample result 2","Sample result 3","Sample result 4"])})}}]),angular.module("basicMEAN").service("Settings",["$http",function(e){let t=this;t.data=null,t.init=e.get("/settings/settings.json").then(function(e){t.data=e.data})}]),angular.module("basicMEAN").controller("ViewSearchCtrl",["$location","Search",function(e,t){let r=this;r.searchViewData={activeSearchTerm:e.search().searchTerm,searchBoxTerm:"",searchResults:null},r.message=`Viewing results for searchTerm = "${r.searchViewData.activeSearchTerm}"`,r.displaySearchResults=function(e){t.getSearchResults(e).then(function(e){r.searchViewData.searchResults=e,console.log("Search results %o",e)})},r.initNewSearch=function(){t.viewSearchResults(r.searchViewData.searchBoxTerm)},r.$onInit=function(){r.searchViewData.activeSearchTerm&&r.displaySearchResults(r.searchViewData.activeSearchTerm)},r.$onInit()}]),angular.module("basicMEAN").controller("View1Ctrl",["Settings",function(e){var t=this;t.message="This is some more text relevant to view 1, but is stored in the View1Ctrl.",t.$onInit=function(){e.init.then(function(){t.message=e.data.view1Msg})},t.$onInit()}]),angular.module("basicMEAN").controller("View2Ctrl",["Settings",function(e){var t=this;t.message="This is some more text relevant to view 2, but is stored in the View2Ctrl.",t.$onInit=function(){e.init.then(function(){t.message=e.data.view2Msg})},t.$onInit()}]),angular.module("basicMEAN").controller("ViewProtectedCtrl",[function(){this.message="This is some more protected text relevant to our protected view."}]);